EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 2 2
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:GND #PWR024
U 1 1 5AE1FDE2
P 3800 6400
F 0 "#PWR024" H 3800 6150 50  0001 C CNN
F 1 "GND" H 3800 6250 50  0000 C CNN
F 2 "" H 3800 6400 50  0001 C CNN
F 3 "" H 3800 6400 50  0001 C CNN
	1    3800 6400
	1    0    0    -1  
$EndComp
Text Label 1350 5200 2    60   ~ 0
GHA
Text Label 1350 5900 2    60   ~ 0
GLA
Text Label 3750 5250 0    60   ~ 0
GHB
Text Label 3750 5850 0    60   ~ 0
GLB
$Comp
L Device:Q_NMOS_DGS Q2
U 1 1 5AE1FDEC
P 1600 5200
F 0 "Q2" H 1800 5300 50  0000 L CNN
F 1 "PSMN0R925YLC" H 1800 5200 50  0000 L CNN
F 2 "LFPAK:LFPAK_POWER_SO-8" H 1800 5300 50  0001 C CNN
F 3 "" H 1600 5200 50  0001 C CNN
	1    1600 5200
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_DGS Q5
U 1 1 5AE1FDF3
P 1600 5900
F 0 "Q5" H 1800 5900 50  0000 L CNN
F 1 "PSMN0R925YLC" H 1800 5800 50  0000 L CNN
F 2 "LFPAK:LFPAK_POWER_SO-8" H 1800 6000 50  0001 C CNN
F 3 "" H 1600 5900 50  0001 C CNN
	1    1600 5900
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_DGS Q3
U 1 1 5AE1FDFA
P 3500 5250
F 0 "Q3" H 3700 5400 50  0000 L CNN
F 1 "PSMN0R925YLC" H 3700 5300 50  0000 L CNN
F 2 "LFPAK:LFPAK_POWER_SO-8" H 3700 5350 50  0001 C CNN
F 3 "" H 3500 5250 50  0001 C CNN
	1    3500 5250
	-1   0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_DGS Q4
U 1 1 5AE1FE01
P 3500 5850
F 0 "Q4" H 3700 5800 50  0000 L CNN
F 1 "PSMN0R925YLC" H 3650 5700 50  0000 L CNN
F 2 "LFPAK:LFPAK_POWER_SO-8" H 3700 5950 50  0001 C CNN
F 3 "" H 3500 5850 50  0001 C CNN
	1    3500 5850
	-1   0    0    -1  
$EndComp
Text Label 8500 3900 0    60   ~ 0
GHA
Text Label 1700 5650 2    60   ~ 0
MOT_A
Text Label 3400 5650 0    60   ~ 0
MOT_B
Text Label 8550 4000 0    60   ~ 0
MOTF_A
$Comp
L Device:C C9
U 1 1 5AE1FE1D
P 8750 3800
F 0 "C9" V 8800 3900 50  0000 L CNN
F 1 "1uF 50V" V 8850 3600 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 8788 3650 50  0001 C CNN
F 3 "" H 8750 3800 50  0001 C CNN
F 4 "50V" V 8700 3650 60  0000 C CNN "Voltage"
	1    8750 3800
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3700 5250 3750 5250
Wire Wire Line
	1700 5400 1700 5550
Wire Wire Line
	3400 5450 3400 5550
Wire Wire Line
	1700 5000 1700 4950
Wire Wire Line
	3700 5850 3750 5850
Wire Wire Line
	1700 6100 1700 6150
Wire Wire Line
	3400 6050 3400 6150
Wire Wire Line
	1350 5200 1400 5200
Wire Wire Line
	1350 5900 1400 5900
Wire Wire Line
	7950 4000 9350 4000
Text Label 3400 4800 2    60   ~ 0
+V_MOTOR
$Comp
L Device:R R31
U 1 1 5AE1FE99
P 3600 6300
F 0 "R31" V 3680 6300 50  0000 C CNN
F 1 "4mR" V 3600 6300 50  0000 C CNN
F 2 "Resistor_SMD:R_2512_6332Metric_Pad1.52x3.35mm_HandSolder" V 3530 6300 50  0001 C CNN
F 3 "" H 3600 6300 50  0001 C CNN
	1    3600 6300
	0    1    1    0   
$EndComp
Text Label 3400 6300 2    60   ~ 0
MOTOR_SHUNT
Text Label 6050 2350 0    60   ~ 0
CURRENT_V
$Comp
L power:GND #PWR014
U 1 1 5AE1FEAB
P 4300 2650
F 0 "#PWR014" H 4300 2400 50  0001 C CNN
F 1 "GND" H 4300 2500 50  0000 C CNN
F 2 "" H 4300 2650 50  0001 C CNN
F 3 "" H 4300 2650 50  0001 C CNN
	1    4300 2650
	0    1    1    0   
$EndComp
Text Label 5050 5150 0    60   ~ 0
GHC
Text Label 5050 5900 0    60   ~ 0
GLC
$Comp
L Device:Q_NMOS_DGS Q1
U 1 1 5AE1FEB4
P 4800 5150
F 0 "Q1" H 5000 5200 50  0000 L CNN
F 1 "PSMN0R925YLC" H 5000 5100 50  0000 L CNN
F 2 "LFPAK:LFPAK_POWER_SO-8" H 5000 5250 50  0001 C CNN
F 3 "" H 4800 5150 50  0001 C CNN
	1    4800 5150
	-1   0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_DGS Q6
U 1 1 5AE1FEBB
P 4800 5900
F 0 "Q6" H 5000 5900 50  0000 L CNN
F 1 "PSMN0R925YLC" H 5000 5800 50  0000 L CNN
F 2 "LFPAK:LFPAK_POWER_SO-8" H 5000 6000 50  0001 C CNN
F 3 "" H 4800 5900 50  0001 C CNN
	1    4800 5900
	-1   0    0    -1  
$EndComp
Text Label 4700 5650 0    60   ~ 0
MOT_C
Wire Wire Line
	5000 5150 5050 5150
Wire Wire Line
	4700 5350 4700 5550
Wire Wire Line
	5000 5900 5050 5900
Connection ~ 3400 4950
Connection ~ 3400 6150
Wire Wire Line
	4700 6150 4700 6100
Wire Wire Line
	1700 6150 2150 6150
Text HLabel 1450 1550 0    60   Input ~ 0
+V_MOTOR
Wire Wire Line
	1450 1550 1550 1550
Text Label 1550 1550 0    60   ~ 0
+V_MOTOR
Text Label 1600 1750 0    60   ~ 0
IN_HA
Text Label 1600 1950 0    60   ~ 0
IN_HB
Text Label 1600 2150 0    60   ~ 0
IN_HC
Text Label 1600 2350 0    60   ~ 0
IN_LA
Text Label 1600 3400 0    60   ~ 0
CURRENT_V
Text HLabel 1450 1750 0    60   Input ~ 0
IN_HA
Text HLabel 1450 1950 0    60   Input ~ 0
IN_HB
Text HLabel 1450 2150 0    60   Input ~ 0
IN_HC
Text HLabel 1450 2350 0    60   Input ~ 0
IN_LA
Text HLabel 1450 3400 0    60   Output ~ 0
CURRENT
Wire Wire Line
	1450 1750 1600 1750
Wire Wire Line
	1600 1950 1450 1950
Wire Wire Line
	1450 2150 1600 2150
Wire Wire Line
	1600 2350 1450 2350
Wire Wire Line
	1450 3400 1600 3400
Text HLabel 1450 3600 0    60   Output ~ 0
MOTOR_A
Wire Wire Line
	1450 3600 1600 3600
Text Label 2050 3600 0    60   ~ 0
MOT_SENSE_A
Text HLabel 1450 3800 0    60   Output ~ 0
MOTOR_B
Wire Wire Line
	1450 3800 1800 3800
Text Label 2050 3800 0    60   ~ 0
MOT_SENSE_B
Text HLabel 1450 4000 0    60   Output ~ 0
MOTOR_C
Wire Wire Line
	1450 4000 2000 4000
Text Label 2050 4000 0    60   ~ 0
MOT_SENSE_C
Text Label 1600 2550 0    60   ~ 0
IN_LB
Text HLabel 1450 2550 0    60   Input ~ 0
IN_LB
Wire Wire Line
	1600 2550 1450 2550
Text Label 1600 3200 0    60   ~ 0
ENABLE
Text HLabel 1450 3200 0    60   Input ~ 0
ENABLE
Wire Wire Line
	1600 3200 1450 3200
$Comp
L Device:R R10
U 1 1 5AE30826
P 9550 4000
F 0 "R10" V 9630 4000 50  0000 C CNN
F 1 "20k" V 9550 4000 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 9480 4000 50  0001 C CNN
F 3 "" H 9550 4000 50  0001 C CNN
	1    9550 4000
	0    1    1    0   
$EndComp
$Comp
L Device:R R11
U 1 1 5AE40793
P 9950 4000
F 0 "R11" V 10030 4000 50  0000 C CNN
F 1 "4.02k" V 9950 4000 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 9880 4000 50  0001 C CNN
F 3 "" H 9950 4000 50  0001 C CNN
	1    9950 4000
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR018
U 1 1 5AE408BE
P 10750 4000
F 0 "#PWR018" H 10750 3750 50  0001 C CNN
F 1 "GND" H 10750 3850 50  0000 C CNN
F 2 "" H 10750 4000 50  0001 C CNN
F 3 "" H 10750 4000 50  0001 C CNN
	1    10750 4000
	0    -1   -1   0   
$EndComp
Text Label 9750 3950 0    60   ~ 0
MOT_SENSE_A
Text HLabel 1450 1350 0    60   Input ~ 0
+5V
Wire Wire Line
	1450 1350 1550 1350
Text Label 1550 1350 0    60   ~ 0
+5V
Text Notes 3150 1400 0    60   ~ 0
10-bit ADC, INA199B1 w/ +-5uV (max 150uV) offset voltage, 50x gain\n2.7-26V supply\nw/ 5.0V reference:\n4mR = 0.2V/A = 25.0A range = 24.4mA/bit = 97.8uV/bit\nActual precision approx. 25mA typical, 50mA worst
$Comp
L ina199a2:INA199A2 U2
U 1 1 5AE8F864
P 4800 2500
F 0 "U2" H 4950 2200 60  0000 C CNN
F 1 "INA199B1" H 4800 2800 60  0000 C CNN
F 2 "ina199a2:INA199A2" H 4800 2550 60  0001 C CNN
F 3 "" H 4800 2550 60  0001 C CNN
	1    4800 2500
	1    0    0    -1  
$EndComp
Text Label 3600 2550 2    60   ~ 0
MOTOR_SHUNT
Text Label 4300 2350 2    60   ~ 0
+5V
Wire Wire Line
	4300 2650 4350 2650
$Comp
L power:GND #PWR015
U 1 1 5AE91639
P 5300 2650
F 0 "#PWR015" H 5300 2400 50  0001 C CNN
F 1 "GND" H 5300 2500 50  0000 C CNN
F 2 "" H 5300 2650 50  0001 C CNN
F 3 "" H 5300 2650 50  0001 C CNN
	1    5300 2650
	0    -1   -1   0   
$EndComp
Wire Wire Line
	5300 2650 5250 2650
$Comp
L Device:C C5
U 1 1 5AE9179D
P 4800 2000
F 0 "C5" H 4825 2100 50  0000 L CNN
F 1 "100nF" V 4850 1700 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 4838 1850 50  0001 C CNN
F 3 "" H 4800 2000 50  0001 C CNN
	1    4800 2000
	0    1    1    0   
$EndComp
Wire Wire Line
	4300 2350 4350 2350
$Comp
L power:GND #PWR012
U 1 1 5AE91CED
P 5000 2000
F 0 "#PWR012" H 5000 1750 50  0001 C CNN
F 1 "GND" H 5000 1850 50  0000 C CNN
F 2 "" H 5000 2000 50  0001 C CNN
F 3 "" H 5000 2000 50  0001 C CNN
	1    5000 2000
	0    -1   -1   0   
$EndComp
Text Label 4600 2000 2    60   ~ 0
+5V
Wire Wire Line
	4600 2000 4650 2000
Wire Wire Line
	4950 2000 5000 2000
Text Notes 9450 5650 0    60   ~ 0
1/6 voltge divider.\n11.1V nominal voltage battery\nmax voltage approx. 13V\nADC 2.23V\n20k, 4.02k, and 22nF give cutoff \nof approx 2kHz. And it is important\nthat the "motor zero" resistors be an\norder of magnitude greater\nor it'll throw this off
$Comp
L Device:C C10
U 1 1 5AF103CC
P 10500 3800
F 0 "C10" H 10525 3900 50  0000 L CNN
F 1 "22nF" H 10525 3700 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 10538 3650 50  0001 C CNN
F 3 "" H 10500 3800 50  0001 C CNN
	1    10500 3800
	0    -1   -1   0   
$EndComp
$Comp
L Device:R R9
U 1 1 5B46D7E3
P 8300 3900
F 0 "R9" V 8250 3700 50  0000 C CNN
F 1 "10R" V 8300 3900 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 8230 3900 50  0001 C CNN
F 3 "" H 8300 3900 50  0001 C CNN
	1    8300 3900
	0    1    1    0   
$EndComp
Wire Wire Line
	8500 3900 8450 3900
Wire Wire Line
	7950 3900 8150 3900
$Comp
L Device:R R8
U 1 1 5B4716B6
P 9150 3800
F 0 "R8" V 9050 3800 50  0000 C CNN
F 1 "1R" V 9150 3800 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 9080 3800 50  0001 C CNN
F 3 "" H 9150 3800 50  0001 C CNN
	1    9150 3800
	0    1    1    0   
$EndComp
$Comp
L Device:C C16
U 1 1 5B47446D
P 2400 5550
F 0 "C16" H 2425 5650 50  0000 L CNN
F 1 "100nF" H 2425 5450 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 2438 5400 50  0001 C CNN
F 3 "" H 2400 5550 50  0001 C CNN
	1    2400 5550
	1    0    0    -1  
$EndComp
Wire Wire Line
	2400 5400 2400 4950
Connection ~ 2400 4950
Wire Wire Line
	2400 5700 2400 6150
Connection ~ 2400 6150
$Comp
L Device:D_Schottky D9
U 1 1 5B475FD5
P 4300 5750
F 0 "D9" H 4300 5850 50  0000 C CNN
F 1 "DSS16UTR‎" H 4200 5650 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-323_HandSoldering" H 4300 5750 50  0001 C CNN
F 3 "" H 4300 5750 50  0001 C CNN
	1    4300 5750
	0    1    1    0   
$EndComp
Wire Wire Line
	4300 6150 4300 5900
Connection ~ 4300 6150
Wire Wire Line
	4300 5600 4300 5550
Connection ~ 4700 5550
Wire Wire Line
	1700 4950 2400 4950
$Comp
L Device:D_Schottky D7
U 1 1 5B476737
P 2150 5700
F 0 "D7" H 2250 5600 50  0000 C CNN
F 1 "DSS16UTR‎" H 2050 5800 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-323_HandSoldering" H 2150 5700 50  0001 C CNN
F 3 "" H 2150 5700 50  0001 C CNN
	1    2150 5700
	0    1    1    0   
$EndComp
$Comp
L Device:D_Schottky D8
U 1 1 5B4767D8
P 3000 5700
F 0 "D8" H 3000 5800 50  0000 C CNN
F 1 "DSS16UTR‎" H 2900 5600 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-323_HandSoldering" H 3000 5700 50  0001 C CNN
F 3 "" H 3000 5700 50  0001 C CNN
	1    3000 5700
	0    1    1    0   
$EndComp
Wire Wire Line
	3000 5850 3000 6150
Connection ~ 3000 6150
Connection ~ 3400 5550
Connection ~ 1700 5550
Wire Wire Line
	2150 5850 2150 6150
Connection ~ 2150 6150
$Comp
L Device:R R29
U 1 1 5B494DFC
P 3200 5550
F 0 "R29" V 3280 5550 50  0000 C CNN
F 1 "10" V 3200 5550 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 3130 5550 50  0001 C CNN
F 3 "" H 3200 5550 50  0001 C CNN
	1    3200 5550
	0    1    1    0   
$EndComp
Wire Wire Line
	3350 5550 3400 5550
Wire Wire Line
	3050 5550 3000 5550
Text Label 3050 5550 1    60   ~ 0
MOTF_B
Text Notes 850  6600 0    60   ~ 0
MOTF here stands for "motor phase filtered,"\nsince it should be safe from negative voltage transients
$Comp
L Device:R R30
U 1 1 5B495808
P 4500 5550
F 0 "R30" V 4580 5550 50  0000 C CNN
F 1 "10" V 4500 5550 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 4430 5550 50  0001 C CNN
F 3 "" H 4500 5550 50  0001 C CNN
	1    4500 5550
	0    1    1    0   
$EndComp
Wire Wire Line
	4650 5550 4700 5550
Wire Wire Line
	4300 5550 4350 5550
Text Label 4300 5550 1    60   ~ 0
MOTF_C
$Comp
L Device:R R28
U 1 1 5B495F42
P 1950 5550
F 0 "R28" V 2030 5550 50  0000 C CNN
F 1 "10" V 1950 5550 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 1880 5550 50  0001 C CNN
F 3 "" H 1950 5550 50  0001 C CNN
	1    1950 5550
	0    1    1    0   
$EndComp
Wire Wire Line
	2100 5550 2150 5550
Wire Wire Line
	1700 5550 1800 5550
Text Label 2150 5550 1    60   ~ 0
MOTF_A
$Comp
L Device:C C8
U 1 1 5B6F28B3
P 6900 3400
F 0 "C8" H 6925 3500 50  0000 L CNN
F 1 "1uF" H 6925 3300 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 6938 3250 50  0001 C CNN
F 3 "" H 6900 3400 50  0001 C CNN
F 4 "25V" H 7100 3400 60  0000 C CNN "Voltage"
	1    6900 3400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR017
U 1 1 5B6F2A1A
P 6900 3200
F 0 "#PWR017" H 6900 2950 50  0001 C CNN
F 1 "GND" H 6900 3050 50  0000 C CNN
F 2 "" H 6900 3200 50  0001 C CNN
F 3 "" H 6900 3200 50  0001 C CNN
	1    6900 3200
	-1   0    0    1   
$EndComp
Wire Wire Line
	6900 3200 6900 3250
Wire Wire Line
	6900 3550 6900 3800
Wire Wire Line
	6800 3800 6900 3800
Wire Wire Line
	9700 4000 9750 4000
Wire Wire Line
	9750 4000 9750 3800
Wire Wire Line
	9750 3800 10350 3800
Connection ~ 9750 4000
Wire Wire Line
	7950 3800 8000 3800
Wire Wire Line
	9350 3800 9350 4000
Connection ~ 9350 4000
Text Label 8500 4200 0    60   ~ 0
GHB
Text Label 8550 4300 0    60   ~ 0
MOTF_B
$Comp
L Device:C C11
U 1 1 5B6F5BB8
P 8750 4100
F 0 "C11" V 8800 4200 50  0000 L CNN
F 1 "1uF 50V" V 8800 3800 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 8788 3950 50  0001 C CNN
F 3 "" H 8750 4100 50  0001 C CNN
F 4 "50V" V 8700 3950 60  0000 C CNN "Voltage"
	1    8750 4100
	0    -1   -1   0   
$EndComp
Wire Wire Line
	7950 4300 9350 4300
$Comp
L Device:R R17
U 1 1 5B6F5BBF
P 9550 4300
F 0 "R17" V 9630 4300 50  0000 C CNN
F 1 "20k" V 9550 4300 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 9480 4300 50  0001 C CNN
F 3 "" H 9550 4300 50  0001 C CNN
	1    9550 4300
	0    1    1    0   
$EndComp
$Comp
L Device:R R18
U 1 1 5B6F5BC5
P 10200 4300
F 0 "R18" V 10280 4300 50  0000 C CNN
F 1 "4.02k" V 10200 4300 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 10130 4300 50  0001 C CNN
F 3 "" H 10200 4300 50  0001 C CNN
	1    10200 4300
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR019
U 1 1 5B6F5BCB
P 10750 4300
F 0 "#PWR019" H 10750 4050 50  0001 C CNN
F 1 "GND" H 10750 4150 50  0000 C CNN
F 2 "" H 10750 4300 50  0001 C CNN
F 3 "" H 10750 4300 50  0001 C CNN
	1    10750 4300
	0    -1   -1   0   
$EndComp
Wire Wire Line
	10350 4300 10650 4300
Text Label 9750 4250 0    60   ~ 0
MOT_SENSE_B
$Comp
L Device:C C12
U 1 1 5B6F5BD3
P 10500 4150
F 0 "C12" H 10525 4250 50  0000 L CNN
F 1 "22nF" H 10500 4050 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 10538 4000 50  0001 C CNN
F 3 "" H 10500 4150 50  0001 C CNN
	1    10500 4150
	0    -1   -1   0   
$EndComp
Connection ~ 10650 4300
$Comp
L Device:R R16
U 1 1 5B6F5BDC
P 8300 4200
F 0 "R16" V 8250 4000 50  0000 C CNN
F 1 "10R" V 8300 4200 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 8230 4200 50  0001 C CNN
F 3 "" H 8300 4200 50  0001 C CNN
	1    8300 4200
	0    1    1    0   
$EndComp
Wire Wire Line
	8500 4200 8450 4200
Wire Wire Line
	7950 4200 8150 4200
$Comp
L Device:R R12
U 1 1 5B6F5BE4
P 9150 4100
F 0 "R12" V 9050 4100 50  0000 C CNN
F 1 "1R" V 9150 4100 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 9080 4100 50  0001 C CNN
F 3 "" H 9150 4100 50  0001 C CNN
	1    9150 4100
	0    1    1    0   
$EndComp
Wire Wire Line
	9700 4300 9750 4300
Connection ~ 9750 4300
Wire Wire Line
	7950 4100 8050 4100
Wire Wire Line
	8900 4100 9000 4100
Wire Wire Line
	9350 4100 9350 4300
Connection ~ 9350 4300
Wire Wire Line
	9300 4100 9350 4100
Wire Wire Line
	9750 4150 9750 4300
Wire Wire Line
	9750 4150 10350 4150
Wire Wire Line
	10650 4150 10650 4300
Wire Wire Line
	10100 4000 10650 4000
Wire Wire Line
	10650 3800 10650 4000
Connection ~ 10650 4000
Wire Wire Line
	9300 3800 9350 3800
Wire Wire Line
	8900 3800 9000 3800
$Comp
L power:GND #PWR020
U 1 1 5B6FA578
P 10750 4300
F 0 "#PWR020" H 10750 4050 50  0001 C CNN
F 1 "GND" H 10750 4150 50  0000 C CNN
F 2 "" H 10750 4300 50  0001 C CNN
F 3 "" H 10750 4300 50  0001 C CNN
	1    10750 4300
	0    -1   -1   0   
$EndComp
Text Label 8500 4500 0    60   ~ 0
GHC
Text Label 8550 4600 0    60   ~ 0
MOTF_C
$Comp
L Device:C C13
U 1 1 5B6FA581
P 8750 4400
F 0 "C13" V 8800 4500 50  0000 L CNN
F 1 "1uF 50V" V 8800 4100 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 8788 4250 50  0001 C CNN
F 3 "" H 8750 4400 50  0001 C CNN
F 4 "50V" V 8700 4250 60  0000 C CNN "Voltage"
	1    8750 4400
	0    -1   -1   0   
$EndComp
Wire Wire Line
	7950 4600 9350 4600
$Comp
L Device:R R21
U 1 1 5B6FA589
P 9550 4600
F 0 "R21" V 9630 4600 50  0000 C CNN
F 1 "20k" V 9550 4600 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 9480 4600 50  0001 C CNN
F 3 "" H 9550 4600 50  0001 C CNN
	1    9550 4600
	0    1    1    0   
$EndComp
$Comp
L Device:R R22
U 1 1 5B6FA58F
P 10200 4600
F 0 "R22" V 10280 4600 50  0000 C CNN
F 1 "4.02k" V 10200 4600 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 10130 4600 50  0001 C CNN
F 3 "" H 10200 4600 50  0001 C CNN
	1    10200 4600
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR021
U 1 1 5B6FA595
P 10750 4600
F 0 "#PWR021" H 10750 4350 50  0001 C CNN
F 1 "GND" H 10750 4450 50  0000 C CNN
F 2 "" H 10750 4600 50  0001 C CNN
F 3 "" H 10750 4600 50  0001 C CNN
	1    10750 4600
	0    -1   -1   0   
$EndComp
Wire Wire Line
	10350 4600 10650 4600
Text Label 9750 4550 0    60   ~ 0
MOT_SENSE_C
$Comp
L Device:C C14
U 1 1 5B6FA59E
P 10500 4450
F 0 "C14" H 10525 4550 50  0000 L CNN
F 1 "22nF" H 10500 4350 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 10538 4300 50  0001 C CNN
F 3 "" H 10500 4450 50  0001 C CNN
	1    10500 4450
	0    -1   -1   0   
$EndComp
Connection ~ 10650 4600
$Comp
L Device:R R20
U 1 1 5B6FA5A5
P 8300 4500
F 0 "R20" V 8250 4300 50  0000 C CNN
F 1 "10R" V 8300 4500 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 8230 4500 50  0001 C CNN
F 3 "" H 8300 4500 50  0001 C CNN
	1    8300 4500
	0    1    1    0   
$EndComp
Wire Wire Line
	8500 4500 8450 4500
Wire Wire Line
	7950 4500 8150 4500
$Comp
L Device:R R19
U 1 1 5B6FA5AD
P 9150 4400
F 0 "R19" V 9050 4400 50  0000 C CNN
F 1 "1R" V 9150 4400 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 9080 4400 50  0001 C CNN
F 3 "" H 9150 4400 50  0001 C CNN
	1    9150 4400
	0    1    1    0   
$EndComp
Wire Wire Line
	9700 4600 9750 4600
Connection ~ 9750 4600
Wire Wire Line
	7950 4400 8100 4400
Wire Wire Line
	8900 4400 9000 4400
Wire Wire Line
	9350 4400 9350 4600
Connection ~ 9350 4600
Wire Wire Line
	9300 4400 9350 4400
Wire Wire Line
	9750 4450 9750 4600
Wire Wire Line
	9750 4450 10350 4450
Wire Wire Line
	10650 4450 10650 4600
Text Label 6800 3800 2    60   ~ 0
+V_MOTOR
Connection ~ 6900 3800
Text Label 7550 2750 2    60   ~ 0
+V_MOTOR
Wire Wire Line
	7550 2750 7600 2750
Wire Wire Line
	7600 2750 7600 3050
Wire Wire Line
	7600 3050 7650 3050
Connection ~ 7600 2750
Wire Wire Line
	7600 3350 7650 3350
Connection ~ 7600 3050
Wire Wire Line
	7950 3350 8000 3350
Wire Wire Line
	8000 3350 8000 3800
Connection ~ 8000 3800
Wire Wire Line
	7950 3050 8050 3050
Wire Wire Line
	8050 3050 8050 4100
Connection ~ 8050 4100
Wire Wire Line
	7950 2750 8100 2750
Wire Wire Line
	8100 2750 8100 4400
Connection ~ 8100 4400
Text Label 8500 4700 0    60   ~ 0
GLA
$Comp
L Device:R R23
U 1 1 5B6FD398
P 8300 4700
F 0 "R23" V 8250 4500 50  0000 C CNN
F 1 "1R" V 8300 4700 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 8230 4700 50  0001 C CNN
F 3 "" H 8300 4700 50  0001 C CNN
	1    8300 4700
	0    1    1    0   
$EndComp
Wire Wire Line
	8500 4700 8450 4700
Wire Wire Line
	7950 4700 8150 4700
Text Label 8500 4800 0    60   ~ 0
GLB
$Comp
L Device:R R24
U 1 1 5B6FD450
P 8300 4800
F 0 "R24" V 8250 4600 50  0000 C CNN
F 1 "1R" V 8300 4800 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 8230 4800 50  0001 C CNN
F 3 "" H 8300 4800 50  0001 C CNN
	1    8300 4800
	0    1    1    0   
$EndComp
Wire Wire Line
	8500 4800 8450 4800
Wire Wire Line
	7950 4800 8150 4800
Text Label 8500 4900 0    60   ~ 0
GLC
$Comp
L Device:R R25
U 1 1 5B6FD4B8
P 8300 4900
F 0 "R25" V 8250 4700 50  0000 C CNN
F 1 "1R" V 8300 4900 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 8230 4900 50  0001 C CNN
F 3 "" H 8300 4900 50  0001 C CNN
	1    8300 4900
	0    1    1    0   
$EndComp
Wire Wire Line
	8500 4900 8450 4900
Wire Wire Line
	7950 4900 8150 4900
Wire Wire Line
	3400 6300 3450 6300
Wire Wire Line
	3750 6300 3800 6300
Wire Wire Line
	3800 6300 3800 6400
Text Label 6850 5000 2    60   ~ 0
MOTOR_SHUNT
$Comp
L power:GND #PWR022
U 1 1 5B6FEB51
P 6200 4900
F 0 "#PWR022" H 6200 4650 50  0001 C CNN
F 1 "GND" H 6200 4750 50  0000 C CNN
F 2 "" H 6200 4900 50  0001 C CNN
F 3 "" H 6200 4900 50  0001 C CNN
	1    6200 4900
	0    1    1    0   
$EndComp
Wire Wire Line
	6200 4900 6250 4900
$Comp
L power:GND #PWR013
U 1 1 5B6FF636
P 3850 2450
F 0 "#PWR013" H 3850 2200 50  0001 C CNN
F 1 "GND" H 3850 2300 50  0000 C CNN
F 2 "" H 3850 2450 50  0001 C CNN
F 3 "" H 3850 2450 50  0001 C CNN
	1    3850 2450
	0    1    1    0   
$EndComp
$Comp
L Device:C C6
U 1 1 5B701AFC
P 5800 2550
F 0 "C6" H 5650 2650 50  0000 L CNN
F 1 "100nF" H 5550 2450 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 5838 2400 50  0001 C CNN
F 3 "" H 5800 2550 50  0001 C CNN
	1    5800 2550
	-1   0    0    1   
$EndComp
Text Notes 4200 3050 0    47   ~ 0
10R and 2uF makes for  approx. 8kHz. cutoff.
Wire Wire Line
	3400 4800 3400 4950
Text Notes 3150 1850 0    60   ~ 0
B/C versions are safer against transients
$Comp
L mic4609:MIC4609 U3
U 1 1 5B6D64DC
P 7450 4600
F 0 "U3" H 7450 4150 60  0000 C CNN
F 1 "MIC4609" H 7450 5550 60  0000 C CNN
F 2 "Package_SO:SOIC-28W_7.5x17.9mm_P1.27mm" H 7550 4000 60  0001 C CNN
F 3 "" H 7550 4000 60  0001 C CNN
	1    7450 4600
	1    0    0    -1  
$EndComp
$Comp
L Device:C C15
U 1 1 5B72608A
P 6700 4800
F 0 "C15" V 6750 4900 50  0000 L CNN
F 1 "1nF" V 6750 4600 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 6738 4650 50  0001 C CNN
F 3 "" H 6700 4800 50  0001 C CNN
	1    6700 4800
	0    -1   -1   0   
$EndComp
Wire Wire Line
	6850 4800 6950 4800
Wire Wire Line
	6550 4800 6250 4800
Wire Wire Line
	6250 4800 6250 4900
Connection ~ 6250 4900
Text Notes 6000 5750 0    60   ~ 0
Overcurrent protection at about 0.52V on ISNS.\nThe IC has a bug: ISNS must be used to prevent startup spikes.\n2.2 * Current_V / (2.2+15) gives 36A limit.\nMore protection will  be done by the microcontroller.
Text Label 1600 2750 0    60   ~ 0
IN_LC
Text HLabel 1450 2750 0    60   Input ~ 0
IN_LC
Wire Wire Line
	1600 2750 1450 2750
Text Label 1600 3000 0    60   ~ 0
~FAULT
Text HLabel 1450 3000 0    60   Output ~ 0
~FAULT
Wire Wire Line
	1450 3000 1600 3000
Text Label 6800 3900 2    60   ~ 0
~FAULT
Wire Wire Line
	6800 3900 6950 3900
Text Label 6800 4000 2    60   ~ 0
ENABLE
Text Label 6800 4100 2    60   ~ 0
IN_HA
Text Label 6800 4300 2    60   ~ 0
IN_HB
Text Label 6800 4500 2    60   ~ 0
IN_HC
Text Label 6800 4200 2    60   ~ 0
IN_LA
Text Label 6800 4400 2    60   ~ 0
IN_LB
Text Label 6800 4600 2    60   ~ 0
IN_LC
Wire Wire Line
	6800 4000 6950 4000
Wire Wire Line
	6950 4100 6800 4100
Wire Wire Line
	6800 4200 6950 4200
Wire Wire Line
	6950 4300 6800 4300
Wire Wire Line
	6800 4400 6950 4400
Wire Wire Line
	6950 4500 6800 4500
Wire Wire Line
	6800 4600 6950 4600
Text HLabel 1450 4500 0    60   Output ~ 0
MOTOR_ZERO
$Comp
L Device:R R13
U 1 1 5B7CE39B
P 1600 4200
F 0 "R13" V 1680 4200 50  0000 C CNN
F 1 "100k" V 1600 4200 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 1530 4200 50  0001 C CNN
F 3 "" H 1600 4200 50  0001 C CNN
	1    1600 4200
	-1   0    0    1   
$EndComp
$Comp
L Device:R R14
U 1 1 5B7CF3EE
P 1800 4200
F 0 "R14" V 1880 4200 50  0000 C CNN
F 1 "100k" V 1800 4200 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 1730 4200 50  0001 C CNN
F 3 "" H 1800 4200 50  0001 C CNN
	1    1800 4200
	-1   0    0    1   
$EndComp
$Comp
L Device:R R15
U 1 1 5B7CF49C
P 2000 4200
F 0 "R15" V 2080 4200 50  0000 C CNN
F 1 "100k" V 2000 4200 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 1930 4200 50  0001 C CNN
F 3 "" H 2000 4200 50  0001 C CNN
	1    2000 4200
	-1   0    0    1   
$EndComp
Wire Wire Line
	1600 3600 1600 4050
Wire Wire Line
	1800 3800 1800 4050
Wire Wire Line
	2000 4000 2000 4050
Wire Wire Line
	1600 4350 1600 4500
Wire Wire Line
	1450 4500 1600 4500
Wire Wire Line
	1800 4500 1800 4350
Connection ~ 1600 4500
Wire Wire Line
	2000 4500 2000 4350
Connection ~ 1800 4500
$Comp
L Device:D_Schottky D4
U 1 1 5B7E4263
P 7800 2750
F 0 "D4" H 7900 2650 50  0000 C CNN
F 1 "DSS16UTR‎" H 7700 2850 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-323_HandSoldering" H 7800 2750 50  0001 C CNN
F 3 "" H 7800 2750 50  0001 C CNN
	1    7800 2750
	-1   0    0    1   
$EndComp
$Comp
L Device:D_Schottky D5
U 1 1 5B7E4482
P 7800 3050
F 0 "D5" H 7900 2950 50  0000 C CNN
F 1 "DSS16UTR‎" H 7700 3150 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-323_HandSoldering" H 7800 3050 50  0001 C CNN
F 3 "" H 7800 3050 50  0001 C CNN
	1    7800 3050
	-1   0    0    1   
$EndComp
$Comp
L Device:D_Schottky D6
U 1 1 5B7E4532
P 7800 3350
F 0 "D6" H 7900 3250 50  0000 C CNN
F 1 "DSS16UTR‎" H 7700 3450 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-323_HandSoldering" H 7800 3350 50  0001 C CNN
F 3 "" H 7800 3350 50  0001 C CNN
	1    7800 3350
	-1   0    0    1   
$EndComp
$Comp
L Device:C C7
U 1 1 5B84D0CF
P 6700 3400
F 0 "C7" H 6725 3500 50  0000 L CNN
F 1 "1uF" H 6725 3300 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 6738 3250 50  0001 C CNN
F 3 "" H 6700 3400 50  0001 C CNN
F 4 "25V" H 6500 3400 60  0000 C CNN "Voltage"
	1    6700 3400
	1    0    0    -1  
$EndComp
Wire Wire Line
	6900 3250 6700 3250
Wire Wire Line
	6700 3550 6900 3550
Wire Wire Line
	3400 4950 4700 4950
Wire Wire Line
	3400 4950 3400 5050
Wire Wire Line
	3400 6150 3400 6300
Wire Wire Line
	3400 6150 4300 6150
Wire Wire Line
	2400 4950 3400 4950
Wire Wire Line
	2400 6150 3000 6150
Wire Wire Line
	4300 6150 4700 6150
Wire Wire Line
	4700 5550 4700 5700
Wire Wire Line
	3000 6150 3400 6150
Wire Wire Line
	3400 5550 3400 5650
Wire Wire Line
	1700 5550 1700 5700
Wire Wire Line
	2150 6150 2400 6150
Wire Wire Line
	9750 4000 9800 4000
Wire Wire Line
	9350 4000 9400 4000
Wire Wire Line
	10650 4300 10750 4300
Wire Wire Line
	9750 4300 10050 4300
Wire Wire Line
	9350 4300 9400 4300
Wire Wire Line
	10650 4000 10750 4000
Wire Wire Line
	10650 4600 10750 4600
Wire Wire Line
	9750 4600 10050 4600
Wire Wire Line
	9350 4600 9400 4600
Wire Wire Line
	6900 3800 6950 3800
Wire Wire Line
	7600 2750 7650 2750
Wire Wire Line
	7600 3050 7600 3350
Wire Wire Line
	8000 3800 8600 3800
Wire Wire Line
	8050 4100 8600 4100
Wire Wire Line
	8100 4400 8600 4400
Wire Wire Line
	6250 4900 6950 4900
Wire Wire Line
	1600 4500 1800 4500
Wire Wire Line
	1800 4500 2000 4500
Wire Wire Line
	2000 4000 2050 4000
Connection ~ 2000 4000
Wire Wire Line
	2050 3800 1800 3800
Connection ~ 1800 3800
Wire Wire Line
	1600 3600 2050 3600
Connection ~ 1600 3600
Text Label 7650 5250 2    60   ~ 0
CURRENT_V
Wire Wire Line
	6850 5000 6950 5000
$Comp
L Device:R R26
U 1 1 5C3FE5E4
P 7900 5250
F 0 "R26" V 7800 5250 50  0000 C CNN
F 1 "20K" V 7900 5250 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 7830 5250 50  0001 C CNN
F 3 "" H 7900 5250 50  0001 C CNN
	1    7900 5250
	0    1    1    0   
$EndComp
$Comp
L Device:R R27
U 1 1 5C3FE67A
P 8300 5250
F 0 "R27" V 8200 5250 50  0000 C CNN
F 1 "3K" V 8300 5250 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 8230 5250 50  0001 C CNN
F 3 "" H 8300 5250 50  0001 C CNN
	1    8300 5250
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR023
U 1 1 5C3FE7BB
P 8500 5250
F 0 "#PWR023" H 8500 5000 50  0001 C CNN
F 1 "GND" V 8505 5122 50  0000 R CNN
F 2 "" H 8500 5250 50  0001 C CNN
F 3 "" H 8500 5250 50  0001 C CNN
	1    8500 5250
	0    -1   -1   0   
$EndComp
Wire Wire Line
	7650 5250 7750 5250
Wire Wire Line
	8050 5250 8100 5250
Wire Wire Line
	7950 5000 8100 5000
Wire Wire Line
	8100 5000 8100 5250
Connection ~ 8100 5250
Wire Wire Line
	8100 5250 8150 5250
Wire Wire Line
	8500 5250 8450 5250
Text Notes 9450 6350 0    50   ~ 0
TODO: For the AVR with ADC at 5V\nwe might as well make a smaller divider\nAnd do we need a smaller cutoff frequency?
Text Notes 9350 5800 0    50   ~ 0
fc = (R1 + R2) / (2pi * R1 * R2 * C1)
Wire Wire Line
	3850 2450 4350 2450
Wire Wire Line
	3600 2550 4350 2550
$Comp
L power:GND #PWR016
U 1 1 5F324AED
P 5800 2700
F 0 "#PWR016" H 5800 2450 50  0001 C CNN
F 1 "GND" H 5800 2550 50  0000 C CNN
F 2 "" H 5800 2700 50  0001 C CNN
F 3 "" H 5800 2700 50  0001 C CNN
	1    5800 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	5800 2400 5800 2350
Wire Wire Line
	5800 2350 6050 2350
$Comp
L Device:R R7
U 1 1 5F32F87D
P 5550 2350
F 0 "R7" V 5450 2300 50  0000 C CNN
F 1 "1k" V 5550 2350 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" V 5480 2350 50  0001 C CNN
F 3 "" H 5550 2350 50  0001 C CNN
	1    5550 2350
	0    1    1    0   
$EndComp
Wire Wire Line
	5250 2350 5400 2350
Wire Wire Line
	5700 2350 5800 2350
Connection ~ 5800 2350
$EndSCHEMATC
